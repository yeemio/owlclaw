# OwlClaw 决策提案（待讨论）

> 主题：`0代码 + 0业务逻辑改动 + 可对比验证` 的存量系统接入路径  
> 状态：`Proposed`（待 Cursor 决策组评审）  
> 日期：`2026-02-24`

---

## 1. 背景与问题

对大多数成熟业务系统（如 mionyee）而言，真实接入约束是：

1. 不愿修改业务代码与核心流程。
2. 可接受部署层/配置层变更。
3. 必须先看到可量化效果，再接受深入改造。

当前 OwlClaw 能力已支持部分“低侵入接入”（queue/cron/MCP），但尚未形成完整“零代码接入产品形态”。

---

## 2. 决策目标

定义并评审一个可执行的接入策略，使 OwlClaw 能在不改业务代码前提下快速证明价值：

1. `T+1` 可见第一批对比指标。
2. 不影响现网主链路（默认 shadow）。
3. 为后续深度接入提供标准化升级路径。

---

## 3. 现状评估（事实基线）

### 3.1 已具备（可立即利用）

1. `triggers-queue` 已完成，可做消息总线镜像消费（shadow consumer）。
2. `triggers-cron` 已完成，可做“任务壳替换”与灰度对比。
3. MCP Server 已完成，可作为标准协议入口。

### 3.2 部分具备（需补产品化封装）

1. HTTP/API 旁路接入能力零散，缺统一 Edge 组件。
2. LLM 调用治理能力存在，但缺透明代理（proxy mode）产品形态。

### 3.3 尚未具备（本提案关注补齐）

1. 面向存量系统的一键“shadow 对比报告”流程。
2. 统一的零代码接入运行手册与验收门槛。

---

## 4. 候选方案

### 方案 A：仅保留现有 SDK 接入（不新增 FastPath）

1. 优点：实现成本最低。
2. 缺点：存量系统采用门槛高，验证周期长。
3. 风险：与“0代码接入”目标冲突，商务推进困难。

### 方案 B：FastPath（推荐）

以基础设施接入为主，不要求业务代码改动：

1. Queue Mirror FastPath（优先）：shadow consumer + 对比报告。
2. Cron Shell FastPath：替换调度壳，不改任务内部逻辑。
3. MCP FastPath：统一外部调用入口，快速挂接现有系统。
4. HTTP Edge FastPath（补件）：网关旁路观察与策略评估。
5. LLM Proxy FastPath（补件）：透明治理、成本/风险可视化。

### 方案 C：先做完整多语言 SDK，再做零代码接入

1. 优点：协议生态完整。
2. 缺点：价值验证慢，投入大，短期难见效果。

---

## 5. 推荐决策（供评审）

建议采用 **方案 B（FastPath）**，分两阶段推进：

### Phase 1（两周内，可见效果）

1. 发布 Queue Mirror + Cron Shell 的接入模板与脚本。
2. 输出标准对比报告（成功率、延迟、成本、人工替代率）。
3. 默认 Shadow，不改变线上业务行为。

### Phase 2（四到六周，完善产品形态）

1. 补齐 HTTP Edge 组件（协议化、可配置策略）。
2. 补齐 LLM Proxy Mode（透明代理、审计、预算与限流）。
3. 形成统一 FastPath 文档与验收标准。

---

## 6. 决策门槛（Go/No-Go）

建议由决策组确认以下量化门槛：

1. `接入成本`：单系统接入时间 <= 1 天（不改业务代码）。
2. `可见效果`：24 小时内输出首份可读对比报告。
3. `安全性`：Shadow 模式下主链路 0 影响。
4. `可复制性`：至少 2 个不同系统可复用同一接入模板。

---

## 7. 需决策组明确的问题

1. FastPath 是否提升为架构层正式决策（并写入主架构文档）。
2. HTTP Edge 与 LLM Proxy 的优先级顺序。
3. 对外发布口径：先“零代码对比验证”，还是同时承诺“生产接管”。
4. 是否将 mionyee 作为首个基准样板（reference implementation）。

---

## 8. 输出物清单（决策通过后）

1. `docs/integrations/FASTPATH_ONBOARDING.md`
2. `deploy/fastpath/queue-shadow/` 模板
3. `deploy/fastpath/cron-shell/` 模板
4. `scripts/fastpath/generate_comparison_report.py`
5. `spec` 补充：Edge/Proxy 两个独立 spec（Protocol-first）

---

## 9. 备注

本提案不替代既有架构决策；其目标是补齐“存量系统低阻力接入”执行层策略，减少“先改代码再验证价值”的阻力。

